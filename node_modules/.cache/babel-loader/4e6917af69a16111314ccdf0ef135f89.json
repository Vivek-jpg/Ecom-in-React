{"ast":null,"code":"import _asyncToGenerator from\"F:/website 2020/Ecom-in-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/website 2020/Ecom-in-React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\website 2020\\\\Ecom-in-React\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{createContext,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var CartContext=/*#__PURE__*/createContext();var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var removeFromCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(productId,setCart){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.delete(\"/api/user/cart/\".concat(productId),{headers:{authorization:localStorage.getItem('token')}});case 3:response=_context.sent;if(response.status===200){setCart(response.data.cart);console.log(\"cart items\",response.data.cart);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function removeFromCart(_x,_x2){return _ref2.apply(this,arguments);};}();var changeCartQty=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(actiontype,productId){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/user/cart/\".concat(productId),{action:{type:actiontype}},{headers:{authorization:localStorage.getItem('token')}});case 3:response=_context2.sent;if(response.status===200){setCart(response.data.cart);}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function changeCartQty(_x3,_x4){return _ref3.apply(this,arguments);};}();var addToCart=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item,setCart){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!cart.find(function(element){return element._id===item._id;})){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.prev=2;_context3.next=5;return axios.post('/api/user/cart/',{product:item},{headers:{authorization:localStorage.getItem('token')}});case 5:response=_context3.sent;console.log(response.data);if(response.status===200){setCart(response.data.cart);console.log(\"items in cart\",cart);}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function addToCart(_x5,_x6){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart:cart,setCart:setCart,addToCart:addToCart,changeCartQty:changeCartQty,removeFromCart:removeFromCart},children:children});};export{CartContext,CartProvider};","map":{"version":3,"sources":["F:/website 2020/Ecom-in-React/src/components/cartPage/cartContext.js"],"names":["createContext","useState","axios","CartContext","CartProvider","children","cart","setCart","removeFromCart","productId","delete","headers","authorization","localStorage","getItem","response","status","data","console","log","changeCartQty","actiontype","post","action","type","addToCart","item","find","element","_id","product"],"mappings":"mWAAA,OAASA,aAAT,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CAEA,GAAMC,CAAAA,WAAW,cAAGH,aAAa,EAAjC,CACA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CAEnC,cAAwBJ,QAAQ,CAAC,EAAD,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,cAAc,2FAAG,iBAAOC,SAAP,CAAkBF,OAAlB,qKAEQL,CAAAA,KAAK,CAACQ,MAAN,0BAA+BD,SAA/B,EACnB,CACIE,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CADb,CADmB,CAFR,QAETC,QAFS,eASjB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CACzBT,OAAO,CAACQ,QAAQ,CAACE,IAAT,CAAcX,IAAf,CAAP,CACAY,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAyBJ,QAAQ,CAACE,IAAT,CAAcX,IAAvC,EACD,CAZc,+EAenBY,OAAO,CAACC,GAAR,cAfmB,oEAAH,kBAAdX,CAAAA,cAAc,iDAApB,CAoBA,GAAMY,CAAAA,aAAa,2FAAG,kBAAOC,UAAP,CAAmBZ,SAAnB,2KAESP,CAAAA,KAAK,CAACoB,IAAN,0BAA6Bb,SAA7B,EACnB,CACAc,MAAM,CAAE,CACNC,IAAI,CAAEH,UADA,CADR,CADmB,CAMnB,CACIV,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CADb,CANmB,CAFT,QAERC,QAFQ,gBAcf,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CACxBT,OAAO,CAACQ,QAAQ,CAACE,IAAT,CAAcX,IAAf,CAAP,CACH,CAhBa,mFAkBdY,OAAO,CAACC,GAAR,eAlBc,sEAAH,kBAAbC,CAAAA,aAAa,kDAAnB,CAuBA,GAAMK,CAAAA,SAAS,2FAAG,kBAAOC,IAAP,CAAanB,OAAb,uIACRD,IAAI,CAACqB,IAAL,CAAU,SAACC,OAAD,QAAaA,CAAAA,OAAO,CAACC,GAAR,GAAgBH,IAAI,CAACG,GAAlC,EAAV,CADQ,2GAKa3B,CAAAA,KAAK,CAACoB,IAAN,CAAW,iBAAX,CAA8B,CAAEQ,OAAO,CAAEJ,IAAX,CAA9B,CAAiD,CACpEf,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CAD2D,CAAjD,CALb,QAKJC,QALI,gBAWVG,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACE,IAArB,EACA,GAAIF,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CACzBT,OAAO,CAACQ,QAAQ,CAACE,IAAT,CAAcX,IAAf,CAAP,CACAY,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6Bb,IAA7B,EACH,CAfS,qFAiBVY,OAAO,CAACC,GAAR,eAjBU,uEAAH,kBAATM,CAAAA,SAAS,kDAAf,CAoBA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEnB,IAAI,CAAJA,IAAF,CAAQC,OAAO,CAAPA,OAAR,CAAiBkB,SAAS,CAATA,SAAjB,CAA2BL,aAAa,CAAbA,aAA3B,CAA0CZ,cAAc,CAAdA,cAA1C,CAA7B,UACKH,QADL,EADJ,CAKH,CAxED,CAyEA,OAASF,WAAT,CAAsBC,YAAtB","sourcesContent":["import { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst CartContext = createContext();\r\nconst CartProvider = ({ children }) => {\r\n\r\n    const [cart, setCart] = useState([]);\r\n\r\n    const removeFromCart = async (productId, setCart) => {\r\n        try {\r\n            const response = await axios.delete(`/api/user/cart/${productId}`,\r\n                {\r\n                    headers: {\r\n                        authorization: localStorage.getItem('token'),\r\n                    },\r\n                }\r\n            );\r\n          if (response.status === 200) {\r\n              setCart(response.data.cart);\r\n              console.log(\"cart items\",response.data.cart)\r\n            }\r\n                \r\n        } catch (error) {\r\n        console.log(error); \r\n        }\r\n    };\r\n    \r\n\r\n    const changeCartQty = async (actiontype, productId) => {\r\n        try {\r\n            const response = await axios.post(`/api/user/cart/${productId}`,\r\n                {\r\n                action: {\r\n                  type: actiontype\r\n                    }\r\n                       },\r\n                {\r\n                    headers: {\r\n                        authorization: localStorage.getItem('token'),\r\n                    },\r\n                }\r\n            );\r\n           if (response.status === 200) {\r\n                setCart(response.data.cart);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }\r\n\r\n    const addToCart = async (item, setCart) => {\r\n         if( (cart.find((element) => element._id === item._id))) {\r\n        return \r\n      }\r\n        try {\r\n            const response = await axios.post('/api/user/cart/', { product: item }, {\r\n                headers: {\r\n                    authorization: localStorage.getItem('token'),\r\n                },\r\n            }\r\n            );  \r\n            console.log(response.data);\r\n            if (response.status === 200) {\r\n                setCart(response.data.cart);\r\n                console.log(\"items in cart\", cart)\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    return (\r\n        <CartContext.Provider value={{ cart, setCart, addToCart,changeCartQty, removeFromCart }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}\r\nexport { CartContext, CartProvider };\r\n         "]},"metadata":{},"sourceType":"module"}