{"ast":null,"code":"import _asyncToGenerator from\"F:/website 2020/Ecom-in-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"F:\\\\website 2020\\\\Ecom-in-React\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Card}from\"../Card/Card\";import Navbar from\"../navbar/Navbar\";import{CartContext}from\"./cartContext\";import{useContext,useEffect}from\"react\";import axios from\"axios\";import{CardHorizontal}from\"../Card/cardHorizontal\";import{WishListContext}from\"../../context/wishlistContext\";import{Cartprice}from\"../cartprice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CartPage=function CartPage(){var _useContext=useContext(CartContext),cart=_useContext.cart,setCart=_useContext.setCart,addToCart=_useContext.addToCart,changeCartQty=_useContext.changeCartQty,_removeFromCart=_useContext.removeFromCart;var _useContext2=useContext(WishListContext),_addToWishList=_useContext2.addToWishList,setwishList=_useContext2.setwishList;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:\"get\",url:\"/api/user/cart\",headers:{authorization:localStorage.getItem('token')}});case 2:response=_context.sent;if(response.status===200){console.log(\"cartdetails\",response.data.cart);setCart(response.data.cart);}case 4:case\"end\":return _context.stop();}}},_callee);}))();},[]);var price=cart.reduce(function(acc,curr){return acc=acc+curr.qty*curr.price.original;},0);var discountedPrice=cart.reduce(function(acc,curr){return acc=acc+curr.price.original-curr.price.discounted;},0);var quantity=cart.reduce(function(acc,curr){return acc=acc+curr.qty;},0);var totalPrice=price-discountedPrice+199;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"h3\",{className:\"cart-heading-my-cart\",style:{color:\"white\",fontSize:\"3rem\"},children:[\"My\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"#f5ac2c\"},children:\"-Cart\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\" cart-page-container-md\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"cart-section-cart-view\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cart-section-card\",children:cart.map(function(item){return/*#__PURE__*/_jsx(CardHorizontal,{product:item,removeFromCart:function removeFromCart(){return _removeFromCart(item._id,setCart);},addToWishList:function addToWishList(){return _addToWishList(item,setwishList);}});})})}),cart.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"cart-heading-my-cart\",children:/*#__PURE__*/_jsxs(\"h3\",{style:{color:\"white\",fontSize:\"4rem\"},children:[\"Your cart is\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"#f5ac2c\"},children:\"-Empty\"}),\" \"]})}):/*#__PURE__*/_jsx(Cartprice,{qty:quantity,price:price,discountPrice:discountedPrice,totalPrice:totalPrice})]})]});};export{CartPage};","map":{"version":3,"sources":["F:/website 2020/Ecom-in-React/src/components/cartPage/cartPage.jsx"],"names":["Card","Navbar","CartContext","useContext","useEffect","axios","CardHorizontal","WishListContext","Cartprice","CartPage","cart","setCart","addToCart","changeCartQty","removeFromCart","addToWishList","setwishList","method","url","headers","authorization","localStorage","getItem","response","status","console","log","data","price","reduce","acc","curr","qty","original","discountedPrice","discounted","quantity","totalPrice","color","fontSize","map","item","_id","length"],"mappings":"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","sourcesContent":["import { Card } from \"../Card/Card\";\r\nimport Navbar from \"../navbar/Navbar\";\r\nimport { CartContext } from \"./cartContext\";\r\nimport { useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { CardHorizontal } from \"../Card/cardHorizontal\";\r\nimport { WishListContext } from \"../../context/wishlistContext\";\r\nimport { Cartprice} from \"../cartprice\";\r\n\r\nconst CartPage = () => {\r\n    \r\n    const { cart, setCart, addToCart, changeCartQty, removeFromCart } = useContext(CartContext);\r\n    const { addToWishList,setwishList } = useContext(WishListContext);\r\n    \r\n    useEffect(() => {\r\n        (async () => {\r\n            const response = await axios({\r\n                method: \"get\",\r\n                url: \"/api/user/cart\",\r\n                headers: { authorization: localStorage.getItem('token') },\r\n            \r\n            });\r\n            if (response.status === 200) {\r\n                console.log(\"cartdetails\", response.data.cart);\r\n                setCart(response.data.cart);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    const price = cart.reduce((acc, curr) => acc = acc + curr.qty * curr.price.original, 0);\r\n    const discountedPrice = cart.reduce((acc, curr) => acc = acc + curr.price.original - curr.price.discounted, 0);\r\n    \r\n    const quantity = cart.reduce((acc, curr) => acc = acc + curr.qty, 0);\r\n    const totalPrice = price - discountedPrice + 199;\r\n    \r\n    \r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n              <h3 className=\"cart-heading-my-cart\" style={{ color: \"white\",fontSize:\"3rem\" } }>My<span style={{color:\"#f5ac2c\"}}>-Cart</span> </h3>\r\n            <div className=\" cart-page-container-md\">\r\n            <section className=\"cart-section-cart-view\">\r\n                <div className=\"cart-section-card\">\r\n                    {\r\n                        cart.map(item => (< CardHorizontal product={item} removeFromCart={() =>removeFromCart(item._id,setCart) }\r\n                            addToWishList={() => addToWishList (item , setwishList) } />))}\r\n                    \r\n\r\n                </div>\r\n              \r\n               \r\n\r\n                \r\n            </section>\r\n             {\r\n                    cart.length === 0 ? <div className=\"cart-heading-my-cart\"><h3 style={{ color: \"white\",fontSize:\"4rem\" } }>Your cart is<span style={{color:\"#f5ac2c\"}}>-Empty</span> </h3></div> : <Cartprice qty={quantity} price={price} discountPrice={discountedPrice} totalPrice={totalPrice}/>\r\n                    \r\n                }\r\n                </div>\r\n        </>\r\n    )\r\n}; \r\nexport { CartPage };\r\n"]},"metadata":{},"sourceType":"module"}