{"ast":null,"code":"import _asyncToGenerator from\"F:/website 2020/Ecom-in-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/website 2020/Ecom-in-React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\website 2020\\\\Ecom-in-React\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{createContext,useContext,useReducer,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var WishListContext=/*#__PURE__*/createContext();var WishListProvider=function WishListProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),wishList=_useState2[0],setwishList=_useState2[1];function removeFromWishList(_x,_x2){return _removeFromWishList.apply(this,arguments);}function _removeFromWishList(){_removeFromWishList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(productId,setwishList){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:'delete',url:\"/api/user/wishlist/\".concat(productId),headers:{authorization:localStorage.getItem(\"token\")}});case 2:response=_context.sent;setwishList(response.data.wishlist);console.log(\"remove from wishlist\",wishList);case 5:case\"end\":return _context.stop();}}},_callee);}));return _removeFromWishList.apply(this,arguments);}function addToWishList(_x3,_x4){return _addToWishList.apply(this,arguments);}function _addToWishList(){_addToWishList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(product,setwishList){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!wishList.find(function(element){return element._id===product._id;})){_context2.next=2;break;}return _context2.abrupt(\"return\",console.log(\"already in wishlist\"));case 2:_context2.next=4;return axios({method:'post',url:\"/api/user/wishlist\",headers:{authorization:localStorage.getItem('token')},data:{product:product}});case 4:response=_context2.sent;setwishList(response.data.wishlist);console.log(\"add into wish\");console.log(response.data.wishlist);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _addToWishList.apply(this,arguments);}return/*#__PURE__*/_jsx(WishListContext.Provider,{value:{wishList:wishList,setwishList:setwishList,removeFromWishList:removeFromWishList,addToWishList:addToWishList},children:children});};export{WishListContext,WishListProvider};","map":{"version":3,"sources":["F:/website 2020/Ecom-in-React/src/context/wishlistContext.jsx"],"names":["axios","createContext","useContext","useReducer","useEffect","useState","WishListContext","WishListProvider","children","wishList","setwishList","removeFromWishList","productId","method","url","headers","authorization","localStorage","getItem","response","data","wishlist","console","log","addToWishList","product","find","element","_id"],"mappings":"mWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,CAAwBC,UAAxB,CAAoCC,UAApC,CAAgDC,SAAhD,CAA2DC,QAA3D,KAA2E,OAA3E,C,2CACA,GAAMC,CAAAA,eAAe,cAAGL,aAAa,EAArC,CAGA,GAAMM,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CAEvC,cAAgCH,QAAQ,CAAC,EAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eAFuC,QAK5BC,CAAAA,kBAL4B,sKAK3C,iBAAkCC,SAAlC,CAA8CF,WAA9C,qJAC2BV,CAAAA,KAAK,CAAC,CACzBa,MAAM,CAAE,QADiB,CAEzBC,GAAG,8BAAwBF,SAAxB,CAFsB,CAGzBG,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CAHgB,CAAD,CADhC,QACUC,QADV,eASIT,WAAW,CAACS,QAAQ,CAACC,IAAT,CAAcC,QAAf,CAAX,CACAC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAoCd,QAApC,EAVJ,sDAL2C,6DAkBxBe,CAAAA,aAlBwB,wJAkBvC,kBAA6BC,OAA7B,CAAsCf,WAAtC,uIACOD,QAAQ,CAACiB,IAAT,CAAc,SAACC,OAAD,QAAaA,CAAAA,OAAO,CAACC,GAAR,GAAgBH,OAAO,CAACG,GAArC,EAAd,CADP,2DAEeN,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAFf,gCAIuBvB,CAAAA,KAAK,CAAC,CACzBa,MAAM,CAAE,MADiB,CAEzBC,GAAG,qBAFsB,CAGzBC,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CAHgB,CAMzBE,IAAI,CAAE,CACFK,OAAO,CAAEA,OADP,CANmB,CAAD,CAJ5B,QAIMN,QAJN,gBAcGT,WAAW,CAACS,QAAQ,CAACC,IAAT,CAAcC,QAAf,CAAX,CACAC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAD,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACC,IAAT,CAAcC,QAA1B,EAhBH,wDAlBuC,gDAoCvC,mBACI,KAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAE,CAAEZ,QAAQ,CAARA,QAAF,CAAYC,WAAW,CAAXA,WAAZ,CAAyBC,kBAAkB,CAAlBA,kBAAzB,CAA6Ca,aAAa,CAAbA,aAA7C,CAAjC,UACKhB,QADL,EADJ,CAKH,CAzCD,CA0CA,OAASF,eAAT,CAA0BC,gBAA1B","sourcesContent":["import axios from \"axios\";\r\nimport { createContext, useContext, useReducer, useEffect, useState } from \"react\";\r\nconst WishListContext = createContext();\r\n\r\n\r\nconst WishListProvider = ({ children }) => {\r\n\r\n    const [wishList, setwishList] = useState([]);\r\n    \r\n\r\nasync function removeFromWishList(productId , setwishList) {\r\n    const response = await axios({\r\n        method: 'delete',\r\n        url: `/api/user/wishlist/${productId}`,\r\n        headers: {\r\n            authorization: localStorage.getItem(\"token\"),\r\n        \r\n        },\r\n    })\r\n    setwishList(response.data.wishlist);\r\n    console.log(\"remove from wishlist\", wishList)\r\n    }\r\n    \r\n    async function addToWishList(product, setwishList) {\r\n        if(wishList.find((element) => element._id === product._id )){\r\n            return console.log(\"already in wishlist\")\r\n        }\r\n    const response = await axios({\r\n        method: 'post',\r\n        url: `/api/user/wishlist`,\r\n        headers: {\r\n            authorization: localStorage.getItem('token')\r\n        },\r\n        data: {\r\n            product: product\r\n        }\r\n    });\r\n       setwishList(response.data.wishlist)\r\n       console.log(\"add into wish\");\r\n       console.log(response.data.wishlist)\r\n}\r\n    return (\r\n        <WishListContext.Provider value={{ wishList, setwishList, removeFromWishList, addToWishList }}>\r\n            {children}\r\n        </WishListContext.Provider>\r\n    )\r\n}\r\nexport { WishListContext, WishListProvider };\r\n"]},"metadata":{},"sourceType":"module"}